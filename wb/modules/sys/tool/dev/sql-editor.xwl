{"hidden":false,"children":[{"configs":{"itemId":"module","loginRequired":"false"},"expanded":true,"children":[{"configs":{"layout":"fit","itemId":"win","resizable":"true","editWin":"true","width":"800","iconCls":"sql_icon","height":"460","maximizable":"true"},"expanded":true,"children":[{"configs":{"itemId":"panel1"},"expanded":true,"children":[{"configs":{"isConfig":"true","itemId":"bbar"},"expanded":true,"children":[{"configs":{"itemId":"fillItem","text":"->"},"expanded":false,"children":[],"type":"item"},{"configs":{"itemId":"cursorLabel","xtype":"tbtext","text":"&#160;"},"expanded":false,"children":[],"type":"item"}],"type":"toolbar"}],"type":"panel"}],"type":"window","events":{"afterrender":"var config, panel = app.panel1;\npanel.update('<textarea><\/textarea>');\nconfig = {\n  lineNumbers: true,\n  theme: Wb.editTheme,\n  mode: 'text/x-sql',\n  matchBrackets: true\n};\napp.editor = CodeMirror.fromTextArea(panel.el.down('textarea', true), config);\npanel.mon(panel, 'resize', function(panel, width, height) {\n  if (app.editor && !panel.destroying) {\n    Ext.fly(app.editor.getScrollerElement()).setHeight(panel.body.getHeight());\n    app.editor.refresh();\n  }\n});\napp.editor.on('cursorActivity', function() {\n  var o = app.editor.getCursor();\n  app.cursorLabel.setText((o.line + 1) + ':' + (o.ch + 1));\n});","ok":"Ext.callback(app.callback, app, [app.editor.getValue(), win]);"}}],"type":"module","events":{"initialize":"Wb.apply(app, {\n  doShow: function() {\n    app.win.show();\n    app.editor.setValue(app.sql || '');\n    setTimeout(function() {\n      app.editor.focus();\n    }, 10);\n  },\n  /**\n   * 显示SQL编辑器对话框。\n   * @param {Function} callback 点击对话框确定按钮时的回调事件，可使用参数value和win，表示编辑的SQL和窗口对象。\n   * @param {Object} [params] 可选参数。\n   * @param {String} [params.title] 窗口标题。\n   * @param {String} [params.sql] 需要编辑的脚本。\n   */\n  show: function(callback, params) {\n    app.sql = params.sql;\n    app.callback = callback;\n    app.win.setTitle(params.title || 'SQL 编辑器');\n    if (window.CodeMirror)\n      app.doShow();\n    else {\n      Wb.addLink(['wb/libs/cm/cmirror.css', 'wb/libs/cm/cmirror.js'],\n        app.doShow\n      );\n    }\n  }\n});"}}],"roles":{},"title":"SQL编辑器","iconCls":"","inframe":false,"pageLink":""}